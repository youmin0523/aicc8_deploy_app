# 🏗️ Implementation Plan: V1/V2 Core & Dashboard Infrastructure

## 1. 개요 및 설계 원칙

사용자의 생산성을 극대화하기 위한 현대적 대시보드 시스템으로, 특히 **V1 레거시의 안정성**과 **V2 프리미엄 디자인의 개성**을 공존시키는 병렬 아키텍처를 지향합니다.

---

## 2. [Total Trouble Log] 상세 트러블슈팅 이력 (v1.0 ~ v2.50)

프로젝트 진행 중 발생한 모든 핵심 기술 난관과 해결의 정수입니다.

| 시각/버전 | 트러블 (Issue)                | 발생 원인 (Root Cause)                                                                             | 해결 로직 및 개선 사항 (Resolution Logic)                                                                                             | 검증 시나리오 (Verification)                                  |
| :-------- | :---------------------------- | :------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------ |
| **v1.0**  | **사이드바 애니메이션 간섭**  | `width` 변경 시 브라우저 레이아웃 계산 재실행(Reflow)으로 인한 프레임 드랍 발생                    | `transform: translateX`와 고정 너비 레이어를 조합하여 GPU 가속을 유도하고 레이아웃 계산 비용 최소화                                   | 사이드바 토글 버튼 광클 시에도 끊김 없이 60fps 유지 확인      |
| **v1.2**  | **비동기 데이터 유실 (Lags)** | 삭제/추가 액션 후 즉시 Fetch 호출 시 서버 DB 반영 전 데이터 조회 현상(Race Condition)              | `useEffect` 의존성 배열에 `actionStatus` 상태를 추가하여 비동기 처리 완료 후 명시적 Fetch 트리거 구성                                 | 아이템 삭제 즉시 화면에서 제거되고 DB와 100% 동기화됨을 확인  |
| **v2.0**  | **블랙 스크린 이슈**          | 버전 전환 시 전역 CSS 가시성 클래스가 초기화(Reset)되어 본문 콘텐츠 높이가 0이 됨                  | `App.css` 내 전역 구조체인 `.app-container`와 `.page_section`에 `min-h-screen` 속성을 강제하고 `VersionLoader` 페이딩 타임라인 동기화 | 버전 스위칭 시 암전 기간 없이 부드러운 전환 확인              |
| **v2.15** | **데이터 격리 침해 위험**     | API 호출 시 `userId` 필터가 프론트엔드에만 의존하여 서버 직접 요청 시 타인 데이터 열람 가능성 존재 | Backend Controller 첫 라인에 `auth` 미들웨어 연동 및 SQL `WHERE` 절에 유저 `sub` 값 바인딩 강제화 (System-wide Isolation)             | 비인가 유저 ID로 API 직접 타격 시 401 또는 403 에러 반환 검증 |
| **v2.45** | **Layout Shift (CLS)**        | 중요도/완료 버튼 상태 변경 시 텍스트 너비 가변으로 인해 주변 요소 위치가 미세하게 튀는 현상        | 버튼에 `w-24`, `min-w-[96px]` 고정 수치를 부여하고 정렬을 중앙으로 고정하여 픽셀 스테이빌리티 확보                                    | 버튼 토글 시 구글 크로스 에러(CLS 0.01 이하) 유지 확인        |

---

## 3. 핵심 시스템 아키텍처 상세 (Implementation Path)

### A. Sidebar Renovation (Mini-Sidebar)

- **Problem**: 데스크탑 화면에서 사이드바가 완전히 사라지면 브랜드 아이덴티티와 빠른 메뉴 접근성이 저하됨.
- **Solution**: 80px 너비의 아이콘 전용 'Mini 모드' 개발.
- **Technical Detail**:
  - 로고 텍스트는 `overflow-hidden` 래퍼로 감싸 애니메이션 시 텍스트 밀림(Artifacts) 방지.
  - `isDesktopOpen` 상태와 `isSidebarOpen` 상태를 분리하여 데스크탑/모바일 독립 작동 구현.

### B. Dynamic Task Grid (Responsive Logic)

- **Logic**: Tailwind의 고정 6컬럼이 아닌, 뷰포트 너비에 따른 가변 Flex-basis 적용.
- **Specifics**:
  - `<768px`: `w-full` (1열)
  - `768~1023px`: `w-1/2` (2열)
  - `>1024px`: `w-1/3` (3열 정렬)

---

## 4. 정밀 검증 계획 (Testing Protocol)

### [Verification 1] UI Stability

- **Method**: 윈도우 창을 극단적으로 빠르게 리사이징하며 사이드바 텍스트와 메인 카드의 위치 관계가 깨지는지 테스트.
- **Target**: 모든 해상도 변곡점(Breakpoint)에서 0.1초 이내 적응 렌더링.

### [Verification 2] State Consistency

- **Method**: 'Important' 필터가 활성된 상태에서 새로운 태스크 추가 -> 해당 태스크가 'Important' 체크가 아닐 경우 목록에서 즉시 사라지는지 확인.
- **Target**: Redux Derived State의 즉각적 반영.

## 5. 작업 히스토리 요약 및 현황

- **Phase 1-3**: V1 인프라 안정화 및 인증 시스템 고도화 완료.
- **Phase 4-6**: V2 프리미엄 디자인 이식 및 CLS 등 성능 최적화 완료.
- **현황**: V1/V2 하이브리드 운영 모드 100% 안정 궤도 진입.
