# 🚀 [AICC 8] 프로젝트 진화 리포트: V1 기초부터 V2 Private Calendar까지

**발표자:** 당신의 이름
**대상:** AICC 8기 풀스택 과정 수강생 및 강사님

---

## 🎙️ 오프닝: 우리 프로젝트는 어떻게 진화해왔는가?

안녕하세요, 여러분! 오늘 발표에서는 우리 프로젝트가 처음 만들어진 **V1 (구도심)** 시절부터, 현재 가장 화려하고 강력한 기능을 자랑하는 **V2 Private Space (신도시)** 까지 어떻게 발전해왔는지 그 여정을 코드로 보여드리려고 합니다.

- **[V1] 튼튼한 콘크리트 뼈대 세우기**: 초기에는 `PostgreSQL` DB를 붙이고, `Google OAuth 2.0`으로 로그인 문을 만들고, 기본적인 게시물(CRUD)을 쓰고 지우는 **'안정성'**에 집중했습니다.
- **[V2] 인테리어와 개인 프라이빗 룸 확장**: 기초 공사가 끝나고, 우리는 화면에 유리 질감(Glassmorphism)을 입히고 화려한 애니메이션을 넣었습니다. 그리고 나만의 비밀 일기와 습관을 관리하는 **'Private Calendar'** 공간을 신축했습니다. 최근에는 이곳에 접속하기 위해 나만의 **[4자리 PIN 번호 도어락]**까지 달았죠!

그럼, 이 거대한 건물이 어떤 파일 구조로 이루어져 있는지, 데이터는 어떻게 흘러가는지 안으로 들어가보겠습니다.

---

### 1. Feature List (핵심 기능 요약)

우리 앱은 크게 3가지 핵심 기능(Feature)으로 나뉩니다.

- **사용자 인증 & 보안 (도어맨 & 도어락)**: 구글 로그인으로 사용자를 식별하고, V2 프라이빗 공간 진입 시 4자리 PIN으로 클라이언트 물리적 잠금을 수행합니다.
- **통합 캘린더 대시보드 (컨트롤 타워)**: 달력 하나에서 다이어리, 습관(Habit), 할 일(Todo), 일정(Schedule)을 한 번에 보고 조작할 수 있습니다.
- **스마트 마킹 시스템 (신호등)**: 다이어리를 쓰면 달력에 `Teal(청록색)` 점이, 일정을 추가하면 `Purple(보라색)` 점이 찍혀 즉각적인 피드백을 줍니다.

---

### 2. Architecture & Data Flow (초정밀 아키텍처 관람 가이드)

프로젝트 전체 폴더 구조를 하나의 **'식당'**으로 비유해볼까요?

- **`front/src/` (홀 & 테이블)**: 손님(사용자)이 시각적으로 보고 누르는 예쁜 화면들입니다.
- **`front/src/redux/` (홀 매니저 & 무전기)**: 데이터가 필요할 때 홀과 주방을 무전기로 연결해주는 '상태 관리소'입니다.
- **`back/` (주방)**: 요리사(컨트롤러)들이 대기하며 데이터를 가공합니다.
- **`PostgreSQL` (대형 냉장고)**: 가공된 데이터가 영구 보관되는 곳입니다.

#### 📍 V1 구도심 vs V2 신도시 통제소

**[파일 위치]** `front/src/App.jsx` (Line 30 주변)

> **변수/함수**: `<Routes>` 라우터 브랜치

- 이곳은 **KTX 환승역**입니다. 사용자가 접속했을 때 기본 주소(`/`)로 오면 V1 환경을 보여주고, 주소창에 `/v2/*`를 치면 새로운 V2 신도시 UI로 안내하는 로직이 여기에 있습니다. 두 세대가 서로 싸우지 않게 물리적으로 격리해둔 안전장치죠!

---

### 3. API Documentation & Data Journey (데이터 여행기)

**상황극: "사용자가 캘린더에 오늘 날짜의 다이어리를 쓰고 저장 버튼을 누른다면?"**
이 평범한 행동 하나에 데이터는 백엔드 냉장고까지 엄청난 여행을 떠납니다. 이 데이터 여정(Data Flow)을 따라가 봅시다.

#### 🚶‍♂️ 1단계: 프론트엔드 (손님의 주문)

1. **[발생 위치]** `front/src/components/v2/PrivateCalendar/DiaryTab.jsx` (Line 240 부근)
   - 여러분이 키보드로 글을 치면, `onChange` 함수가 발동되어 `diaryContent`라는 **'내 주머니 속 지갑(useState)'** 변수에 실시간으로 글씨가 담깁니다.
2. **[전달 경로]** `front/src/redux/slices/privateCalendarSlice.js`
   - '저장' 버튼을 누르는 순간! 무전기(Redux)를 듭니다. `saveDiaryThunk`라는 함수가 발동되며, 여러분이 쓴 다이어리와 이미지(`Payload`)를 포장해서 백엔드 주방으로 퀵 배달(API Call)을 보냅니다.

#### 👨‍🍳 2단계: API 명세 (주방으로 들어가는 문)

| Method   | Endpoint                 | Description                        | Payload (택배 내용물)                                   |
| :------- | :----------------------- | :--------------------------------- | :------------------------------------------------------ |
| **POST** | `/api/v2/private/diary`  | 다이어리와 이미지 썸네일 저장      | `{ date: '2026-02-23', content: '...', images: [...] }` |
| **GET**  | `/api/v2/private/habits` | 이번 달 내 습관 체크 여부 불러오기 | `?month=02&year=2026` (Query String)                    |

#### 🍳 3단계: 백엔드 & DB (요리와 저장)

3. **[수신 위치]** `back/routes/privateCalendarRoutes.js`
   - 주방 입구에서 택배를 받습니다. "어? 다이어리 저장이네? 1번 요리사한테 전달해!"
4. **[변화/가공]** `back/controllers/privateCalendarControllers.js` (Line 85 부근)
   - Controller 요리사가 택배를 열어보고, 이 사람이 해킹범인지 권한(token의 `sub` 즉 `user_id`)을 검증합니다.
5. **[최종 목적지]** Database (`INSERT ... ON CONFLICT` 쿼리문)
   - DB 냉장고에 빈 공간이 있으면 새로 넣고(INSERT), 이미 오늘 자 일기가 있다면 그 칸을 덮어씁니다(UPDATE). 이를 **'Upsert(업설트) 마법'**이라고 부릅니다!
   - 그 후 프론트엔드에 `[200 OK]` 카톡을 보내면, 화면에 "동기화가 완료되었습니다!"라는 초록색 예쁜 알림(Toast)이 뜹니다.

---

### 4. 🛠️ 우리의 트러블슈팅 (에러 극복기)

프로젝트를 진행하며 우리는 수많은 에러 괴물들과 싸웠습니다. 그중 가장 기억에 남는 전투입니다.

- **현상: "화면 아래가 짤려요!" (Clipping 이슈)**
  - **원인**: V2 캘린더 타일이 너무 크고 예뻐서(84px), 노트북처럼 화면이 작은 곳(1080p 해상도)에서는 맨 아래 버튼이 밀려나서 안 보였습니다.
  - **해결방법**: `[Header Scaling & Row-Precision]` 작전 수행! 다이어트가 필요했습니다. 달력 헤더 글씨 크기를 팍 줄이고(`text-4xl` ➡️ `text-2xl`), 타일 높이를 84px에서 78px로 미세하게 줄였더니, 하단에 100px 이상의 마법 같은 여유 공간이 생겨 스크롤 없이도 완벽한 핏이 나왔습니다!

- **현상: "데이터 불러올 때 하얀 화면이 멈춰요!" (White Screen)**
  - **해결방법**: 데이터가 로딩되는 1~2초 동안 손님을 멍하게 두면 안 됩니다. `VersionLoader`라는 뼈대(Skeleton) UI를 만들어서, "지금 달력 구조를 짜고 있어요~"라는 애니메이션을 보여주어 체감 대기시간을 줄였습니다.

---

### 💡 [Mentor's Tip] 강사님과 동기 분들을 위한 특별한 인사이트

1. **상태 관리의 딜레마 (useState vs Redux):**
   - "다 Redux에 넣으면 최고 아닌가요?" 절대 아닙니다! 입력창에 키보드를 칠 때마다(onChange) Redux 은행 문을 열면 서버가 터집니다.
   - **실무 팁:** 타이핑하는 그 순간은 내 주머니(useState) 안에서만 빠르게 바꾸고, 최종적으로 '저장' 버튼을 누를 때만 Redux 은행을 통해 백엔드로 보내는 최적화가 중요합니다.

2. **비동기 흐름의 묘미 (Optimistic UI):**
   - 저희 앱에서 '습관 체크' 버튼을 누르면 서버 응답을 기다리지 않고 화면부터 체크 표시(🟢)로 바뀝니다. 서버엔 뒤늦게 저장되죠. 이걸 **'낙관적 업데이트(Optimistic Update)'**라고 부릅니다. 여러분도 나중에 좋아요 버튼 같은 걸 만들 때 꼭 적용해 보세요. 앱이 10배는 빨라 보입니다!

이것으로 V1부터 V2 신도시까지, 땀과 코오피로 지은 우리 프로젝트의 발표를 마칩니다. 감사합니다!
